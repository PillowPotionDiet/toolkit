<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>Free Video Compressor | MP4, WebM, AVI, MKV - PillowPotion</title>
    <meta name="description"
        content="Free unlimited video compressor with target size control. Compress videos (MP4, WebM, AVI, MKV) with percentage or target size options. No limits, no signup required!">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Free Video Compressor | Multi-Format Support - PillowPotion">
    <meta property="og:description"
        content="Compress videos (MP4, WebM, AVI, MKV) with target size control. Free unlimited processing with quality preservation. Part of PillowPotion's professional tools suite.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://toolkit.pillowpotion.com/video-compressor/">
    <meta property="og:image" content="https://pillowpotion.com/offers/pillowpotionlogo.webp">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free Video Compressor | MP4, WebM, AVI, MKV">
    <meta name="twitter:description"
        content="Free unlimited video compressor. Compress videos with target size control and quality preservation.">
    <meta name="twitter:image" content="https://pillowpotion.com/offers/pillowpotionlogo.webp">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://toolkit.pillowpotion.com/video-compressor/">

    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé¨</text></svg>">

    <!-- Critical CSS - Inlined for Performance -->
    <style>
        /* Critical Above-the-Fold Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Hero Background Animation */
        .hero-background-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
            pointer-events: none;
        }

        #particles-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .hero-gradient-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg,
                rgba(102, 126, 234, 0.1) 0%,
                rgba(118, 75, 162, 0.1) 50%,
                rgba(240, 147, 251, 0.1) 100%);
            animation: gradientShift 15s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.8;
            }
        }

        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
            animation: float 20s infinite ease-in-out;
        }

        .shape-1 {
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape-2 {
            width: 400px;
            height: 400px;
            background: linear-gradient(135deg, #f093fb, #f5576c);
            top: 50%;
            right: 10%;
            animation-delay: 5s;
        }

        .shape-3 {
            width: 250px;
            height: 250px;
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            bottom: 20%;
            left: 20%;
            animation-delay: 10s;
        }

        .shape-4 {
            width: 350px;
            height: 350px;
            background: linear-gradient(135deg, #43e97b, #38f9d7);
            bottom: 10%;
            right: 30%;
            animation-delay: 15s;
        }

        @keyframes float {
            0%, 100% {
                transform: translate(0, 0) scale(1);
            }
            33% {
                transform: translate(30px, -30px) scale(1.1);
            }
            66% {
                transform: translate(-20px, 20px) scale(0.9);
            }
        }

        .brand-header {
            text-align: center;
            color: white;
            padding: 15px 0;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .brand-logo {
            max-width: 200px;
            height: auto;
            margin-bottom: 10px;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
        }

        .brand-tagline {
            font-size: 0.95em;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .tools-nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .tools-nav a {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .tools-nav a:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px 0;
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .tool-section {
            background-color: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }

        .upload-zone {
            border: 3px dashed #667eea;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            background-color: #f8f9ff;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .upload-zone:hover {
            background-color: #eef0ff;
            border-color: #764ba2;
        }

        .upload-zone input[type="file"] {
            display: none;
        }

        .upload-icon {
            font-size: 4em;
            margin-bottom: 10px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            padding: 15px 30px;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            flex: 1;
        }

        #compress-video-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        #download-video-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        button:disabled {
            background: #ccc !important;
            cursor: not-allowed;
            transform: none;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .feature-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .content-section {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .content-section h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .content-section h3 {
            color: #764ba2;
            font-size: 1.5em;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .how-to-steps {
            counter-reset: step-counter;
            list-style: none;
            padding-left: 0;
        }

        .how-to-steps li {
            counter-increment: step-counter;
            margin-bottom: 30px;
            padding-left: 60px;
            position: relative;
        }

        .how-to-steps li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }

        .faq-item {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .faq-question {
            font-weight: 600;
            color: #333;
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        .faq-answer {
            color: #555;
            line-height: 1.7;
        }

        /* Video Compression Styles */
        .compression-method {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 8px;
        }

        .compression-method label {
            display: block;
            margin-bottom: 15px;
            font-weight: 600;
            color: #333;
        }

        .compression-method input[type="radio"] {
            margin-right: 10px;
        }

        .compression-controls {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 6px;
            border: 2px solid #667eea;
        }

        .compression-controls input[type="number"],
        .compression-controls input[type="range"] {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 16px;
        }

        .compression-controls input[type="range"] {
            padding: 0;
        }

        .format-select {
            padding: 6px 10px;
            border: 2px solid #667eea;
            border-radius: 6px;
            background-color: white;
            color: #333;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 100px;
        }

        .format-select:hover {
            border-color: #764ba2;
            background-color: #f8f9ff;
        }

        .format-select:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        .size-info {
            margin-top: 15px;
            padding: 15px;
            background: #e8f4f8;
            border-radius: 6px;
            border-left: 4px solid #667eea;
        }

        .video-preview {
            margin-top: 20px;
            text-align: center;
        }

        .video-preview video {
            max-width: 100%;
            max-height: 400px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .hidden {
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        footer {
            text-align: center;
            color: white;
            padding: 20px;
            margin-top: 40px;
        }

        footer a {
            color: white;
            text-decoration: underline;
            margin: 0 10px;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .brand-logo {
                max-width: 150px;
            }

            .brand-tagline {
                font-size: 0.85em;
            }

            .tools-nav {
                flex-direction: column;
                gap: 10px;
                padding: 0 20px;
            }

            .tools-nav a {
                width: 100%;
                text-align: center;
            }

            .header {
                margin-bottom: 20px;
                padding: 15px 0;
            }

            .header h1 {
                font-size: 1.5em;
                margin-bottom: 8px;
            }

            .header .subtitle {
                font-size: 0.9em;
            }

            .tool-section {
                padding: 20px 15px;
            }

            .content-section {
                padding: 25px 15px;
            }

            .content-section h2 {
                font-size: 1.5em;
            }

            .content-section h3 {
                font-size: 1.2em;
            }

            .upload-zone {
                padding: 25px 15px;
            }

            .upload-icon {
                font-size: 3em;
            }

            .features-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .feature-card {
                padding: 20px 15px;
            }

            .action-buttons {
                flex-direction: column;
                gap: 10px;
            }

            button {
                padding: 12px 20px;
                font-size: 14px;
            }

            .how-to-steps li {
                padding-left: 50px;
                font-size: 0.95em;
            }

            .how-to-steps li::before {
                width: 35px;
                height: 35px;
                font-size: 1em;
            }

            .faq-item {
                padding: 15px;
                margin-bottom: 15px;
            }

            .faq-question {
                font-size: 1em;
            }

            footer {
                padding: 15px 10px;
                font-size: 0.9em;
            }

            footer a {
                display: block;
                margin: 8px 0;
            }

            .compression-method {
                padding: 15px;
            }

            .compression-controls input[type="number"] {
                font-size: 14px;
            }
        }
    </style>

    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Free Video Compressor - PillowPotion",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "Web Browser",
        "publisher": {
            "@type": "Organization",
            "name": "PillowPotion",
            "logo": "https://pillowpotion.com/offers/pillowpotionlogo.webp"
        },
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": "Video compression (MP4, WebM, AVI, MKV), Target size control, Percentage-based compression, Quality preservation, Format conversion, No file size limits, No signup required",
        "description": "Free unlimited video compressor with target size control. Compress videos with quality preservation. Supports multiple formats.",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.9",
            "ratingCount": "1247"
        }
    }
    </script>
</head>

<body>
    <!-- Hero Background -->
    <div class="hero-background-wrapper">
        <canvas id="particles-canvas"></canvas>
        <div class="hero-gradient-overlay"></div>
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
            <div class="shape shape-4"></div>
        </div>
    </div>

    <!-- Brand Header -->
    <div class="brand-header">
        <a href="../" style="text-decoration: none; color: inherit;">
            <img src="https://pillowpotion.com/offers/pillowpotionlogo.webp" alt="PillowPotion Logo" class="brand-logo" onerror="this.style.display='none'">
        </a>
        <p class="brand-tagline">Professional Video Tools Suite - Part of PillowPotion Toolkit</p>
        <nav class="tools-nav">
            <a href="../">üè† Toolkit Home</a>
            <a href="../compressor/">üñºÔ∏è Image Compressor</a>
            <a href="./">üé¨ Video Compressor</a>
            <a href="../bg-remover/">‚úÇÔ∏è Background Remover</a>
        </nav>
    </div>

    <!-- Header -->
    <header class="header">
        <h1>üé¨ Free Video Compressor</h1>
        <p class="subtitle">MP4, WebM, AVI, MKV ‚Ä¢ Target Size Control ‚Ä¢ Quality Preserved ‚Ä¢ 100% Free</p>
    </header>

    <div class="container">
        <!-- Video Compression Section -->
        <section class="tool-section">
            <div class="upload-zone" id="video-upload-zone">
                <input type="file" id="video-file" accept="video/*">
                <div class="upload-icon">üé¨</div>
                <h3>Drop video here or click to upload</h3>
                <p>Support for MP4, WebM, AVI, MKV, MOV ‚Ä¢ One video at a time</p>
            </div>

            <div id="video-settings" class="hidden">
                <h3 style="margin-bottom: 20px;">Compression Settings</h3>

                <div class="compression-method">
                    <label><strong>Output Format:</strong></label>
                    <select class="format-select" id="video-format" style="width: 100%; max-width: 300px;">
                        <option value="mp4">MP4 (H.264)</option>
                        <option value="webm">WebM (VP8)</option>
                        <option value="avi">AVI (MPEG4)</option>
                        <option value="mkv">MKV (H.264)</option>
                    </select>
                </div>

                <div class="compression-method">
                    <label><strong>Compression Method:</strong></label>
                    <div>
                        <label>
                            <input type="radio" name="compression-type" value="percentage" checked onchange="updateCompressionControls()">
                            Compress by Percentage
                        </label>
                    </div>
                    <div>
                        <label>
                            <input type="radio" name="compression-type" value="targetsize" onchange="updateCompressionControls()">
                            Compress to Target Size (KB)
                        </label>
                    </div>

                    <div class="compression-controls" id="percentage-controls">
                        <label for="compression-percentage"><strong>Compression Percentage:</strong></label>
                        <input type="range" id="compression-percentage" min="10" max="90" value="50" oninput="updatePercentageDisplay()">
                        <div style="text-align: center; margin-top: 10px; font-weight: 600; color: #667eea;">
                            <span id="percentage-display">50%</span> of original size
                        </div>
                    </div>

                    <div class="compression-controls hidden" id="targetsize-controls">
                        <label for="target-size"><strong>Target Size (KB):</strong></label>
                        <input type="number" id="target-size" min="100" step="100" placeholder="e.g., 5000" oninput="updateTargetSizeDisplay()">
                        <div style="text-align: center; margin-top: 10px; font-size: 14px; color: #666;">
                            Enter desired file size in kilobytes
                        </div>
                    </div>
                </div>

                <div class="size-info" id="video-info">
                    <strong>Original Video:</strong><br>
                    <span id="original-video-name">-</span><br>
                    <span id="original-video-size">Size: -</span><br>
                    <span id="original-video-duration">Duration: -</span><br>
                    <span id="original-video-resolution">Resolution: -</span>
                </div>
            </div>

            <div class="action-buttons">
                <button id="compress-video-btn" disabled>Compress Video</button>
                <button id="download-video-btn" disabled class="hidden">Download Compressed Video</button>
            </div>

            <div id="video-progress" class="hidden">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill">0%</div>
                </div>
                <p id="progress-text" style="text-align: center; color: #667eea; font-weight: 600;">Processing...</p>
            </div>

            <div id="video-output" class="hidden">
                <h3>Compression Result:</h3>
                <div class="size-info">
                    <strong>Compressed Video:</strong><br>
                    <span id="compressed-video-size">Size: -</span><br>
                    <span id="compression-ratio">Compression: -</span><br>
                    <span id="quality-info">Quality: Preserved</span>
                </div>
                <div class="video-preview">
                    <h4>Preview:</h4>
                    <video id="preview-video" controls></video>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="content-section">
            <h2>Why Our Video Compressor is the Best</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üîÑ</div>
                    <h3>Multi-Format Conversion</h3>
                    <p>Convert <strong>videos (MP4, WebM, AVI, MKV)</strong> instantly. Perfect for web optimization or compatibility across all devices and platforms.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h3>Target Size Control</h3>
                    <p>Compress videos to <strong>exact target size</strong> or by percentage (10-90%). Our intelligent algorithm calculates optimal bitrate to achieve your desired file size while preserving quality.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üíé</div>
                    <h3>Quality Preservation</h3>
                    <p>Advanced <strong>H.264 High Profile encoding</strong> with optimized settings ensures maximum quality at any file size.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üé¨</div>
                    <h3>Professional Video Compression</h3>
                    <p>One-click video compression with <strong>real-time progress tracking</strong>. Supports MP4, WebM, AVI, and MKV with preview before download. Perfect for social media, email, or web.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3>Fast Processing</h3>
                    <p>Client-side processing using FFmpeg ensures your videos are compressed quickly without server uploads. All processing happens in your browser.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üÜì</div>
                    <h3>100% Free & Unlimited</h3>
                    <p>No limits on file size, quantity, or features. No signup required, no watermarks, no hidden fees. Compress videos forever free with full professional features.</p>
                </div>
            </div>
        </section>

        <!-- How-To Guide -->
        <section class="content-section">
            <h2>How to Use Video Compressor</h2>

            <h3>Video Compression - 4 Simple Steps</h3>
            <ol class="how-to-steps">
                <li>
                    <h3>Upload Your Video</h3>
                    <p>Upload your video (MP4, WebM, AVI, MKV, MOV) - one video at a time for best results. Click or drag and drop to upload.</p>
                </li>
                <li>
                    <h3>Select Output Format</h3>
                    <p>Choose your desired format: MP4 (H.264) for maximum compatibility, WebM for web, AVI for editing, or MKV for archiving.</p>
                </li>
                <li>
                    <h3>Set Compression Target</h3>
                    <p>Choose compression method: compress by percentage (10-90% of original size) or enter exact target size in KB. Our algorithm will optimize bitrate for best quality.</p>
                </li>
                <li>
                    <h3>Compress & Download</h3>
                    <p>Click "Compress Video" and watch real-time progress. Preview the result and download your compressed video with preserved quality!</p>
                </li>
            </ol>
        </section>

        <!-- FAQ Section -->
        <section class="content-section">
            <h2>Frequently Asked Questions</h2>

            <div class="faq-item">
                <div class="faq-question">How accurate is the target size compression for videos?</div>
                <div class="faq-answer">Our advanced bitrate calculation algorithm is highly accurate (typically within 5% of target size). We account for audio bitrate, container overhead, and video duration to calculate the optimal video bitrate that achieves your desired file size while maintaining maximum quality.</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">What video formats are supported?</div>
                <div class="faq-answer">You can upload any video format (MP4, WebM, AVI, MKV, MOV, etc.) and convert to MP4 (H.264), WebM (VP8), AVI, or MKV. MP4 is recommended for maximum compatibility across all devices and platforms.</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Will video compression reduce quality significantly?</div>
                <div class="faq-answer">Our video compressor uses professional H.264 High Profile encoding with optimized quality settings. Even at 50% compression, most videos maintain excellent visual quality. We use constrained bitrate encoding to prevent quality drops while achieving your target file size.</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Can I compress multiple videos at once?</div>
                <div class="faq-answer">Video compression processes one video at a time for optimal quality and performance. This ensures maximum CPU resources are dedicated to your video, resulting in faster processing and better quality output.</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">How long does video compression take?</div>
                <div class="faq-answer">Processing time depends on video length, resolution, and your device's CPU. A typical 1-minute 1080p video takes 30-90 seconds to compress. The first time you use it, FFmpeg library loads (one-time ~20MB download). You'll see real-time progress during compression.</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Is this tool really free?</div>
                <div class="faq-answer">Yes, 100% free with no trials, subscriptions, or watermarks. All features including video compression, multi-format conversion, and downloads are completely free to use forever. Part of PillowPotion's professional tools suite.</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Is my data safe? Where are files processed?</div>
                <div class="faq-answer">Absolutely safe! All processing happens directly in your browser using client-side technology. Your videos never leave your device or get uploaded to any server. This ensures complete privacy and security for your media.</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">What other tools does PillowPotion offer?</div>
                <div class="faq-answer">PillowPotion offers a complete suite of professional media tools including this Video Compressor, our <a href="../compressor/">Image Compressor & Converter</a>, and our <a href="https://removebg.pillowpotion.com">Background Remover Tool</a> for instantly removing backgrounds from images. All tools are free and unlimited.</div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 PillowPotion - Professional Media Tools Suite. All rights reserved.</p>
        <nav>
            <a href="../compressor/">Image Compressor</a>
            <a href="../bg-remover/">Background Remover</a>
            <a href="https://removebg.pillowpotion.com">Background Remover Tool</a>
        </nav>
    </footer>

    <!-- FFmpeg for video processing -->
    <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.11.6/dist/ffmpeg.min.js"></script>

    <!-- Main Application Script -->
    <script>
        // Utility function - Global scope
        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Video compression control functions
        function updateCompressionControls() {
            const selectedType = document.querySelector('input[name="compression-type"]:checked').value;
            const percentageControls = document.getElementById('percentage-controls');
            const targetsizeControls = document.getElementById('targetsize-controls');

            if (selectedType === 'percentage') {
                percentageControls.classList.remove('hidden');
                targetsizeControls.classList.add('hidden');
            } else {
                percentageControls.classList.add('hidden');
                targetsizeControls.classList.remove('hidden');
            }
        }

        function updatePercentageDisplay() {
            const percentage = document.getElementById('compression-percentage').value;
            document.getElementById('percentage-display').textContent = percentage + '%';
        }

        function updateTargetSizeDisplay() {
            // Just for validation or future use
        }

        // Wait for external libraries to load
        window.addEventListener('load', initializeVideoCompression);

        // Video Compression Implementation
        function initializeVideoCompression() {
            const { createFFmpeg, fetchFile } = FFmpeg;

            let ffmpeg = null;
            let loadedFFmpeg = false;
            let currentVideoFile = null;
            let compressedVideoBlob = null;

            const videoFileInput = document.getElementById('video-file');
            const videoUploadZone = document.getElementById('video-upload-zone');
            const videoSettings = document.getElementById('video-settings');
            const compressVideoBtn = document.getElementById('compress-video-btn');
            const downloadVideoBtn = document.getElementById('download-video-btn');
            const videoProgress = document.getElementById('video-progress');
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            const videoOutput = document.getElementById('video-output');

            // Upload zone click handler
            videoUploadZone.addEventListener('click', () => videoFileInput.click());

            // Drag and drop handlers for video
            videoUploadZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                videoUploadZone.style.borderColor = '#764ba2';
                videoUploadZone.style.backgroundColor = '#eef0ff';
            });

            videoUploadZone.addEventListener('dragleave', () => {
                videoUploadZone.style.borderColor = '#667eea';
                videoUploadZone.style.backgroundColor = '#f8f9ff';
            });

            videoUploadZone.addEventListener('drop', (e) => {
                e.preventDefault();
                videoUploadZone.style.borderColor = '#667eea';
                videoUploadZone.style.backgroundColor = '#f8f9ff';
                videoFileInput.files = e.dataTransfer.files;
                videoFileInput.dispatchEvent(new Event('change'));
            });

            // Video file selection handler
            videoFileInput.addEventListener('change', async (e) => {
                const file = e.target.files[0];
                if (!file) return;

                currentVideoFile = file;
                videoSettings.classList.remove('hidden');
                videoOutput.classList.add('hidden');
                videoProgress.classList.add('hidden');
                downloadVideoBtn.classList.add('hidden');
                compressVideoBtn.disabled = false;

                // Display video info
                document.getElementById('original-video-name').textContent = file.name;
                document.getElementById('original-video-size').textContent = `Size: ${formatBytes(file.size)}`;

                // Get video metadata
                const video = document.createElement('video');
                video.preload = 'metadata';

                video.onloadedmetadata = function() {
                    window.URL.revokeObjectURL(video.src);
                    const duration = Math.floor(video.duration);
                    const minutes = Math.floor(duration / 60);
                    const seconds = duration % 60;
                    document.getElementById('original-video-duration').textContent =
                        `Duration: ${minutes}m ${seconds}s`;
                    document.getElementById('original-video-resolution').textContent =
                        `Resolution: ${video.videoWidth} x ${video.videoHeight}`;
                }

                video.src = URL.createObjectURL(file);
            });

            // Compress video button handler
            compressVideoBtn.addEventListener('click', async () => {
                if (!currentVideoFile) return;

                compressVideoBtn.disabled = true;
                videoProgress.classList.remove('hidden');
                videoOutput.classList.add('hidden');
                progressFill.style.width = '0%';
                progressFill.textContent = '0%';

                try {
                    // Initialize FFmpeg if not already loaded
                    if (!loadedFFmpeg) {
                        progressText.textContent = 'Loading FFmpeg library (one-time download)...';
                        ffmpeg = createFFmpeg({
                            log: true,
                            progress: ({ ratio }) => {
                                const percentage = Math.round(ratio * 100);
                                progressFill.style.width = percentage + '%';
                                progressFill.textContent = percentage + '%';
                                progressText.textContent = `Compressing video... ${percentage}%`;
                            },
                            corePath: 'https://unpkg.com/@ffmpeg/core@0.11.0/dist/ffmpeg-core.js'
                        });

                        await ffmpeg.load();
                        loadedFFmpeg = true;
                    }

                    progressText.textContent = 'Uploading video to memory...';
                    progressFill.style.width = '5%';
                    progressFill.textContent = '5%';

                    // Clean up any previous files
                    try {
                        ffmpeg.FS('unlink', 'input.mp4');
                    } catch (e) {
                        // File doesn't exist, ignore
                    }

                    // Write input file to FFmpeg filesystem
                    ffmpeg.FS('writeFile', 'input.mp4', await fetchFile(currentVideoFile));

                    progressText.textContent = 'Analyzing video and calculating optimal settings...';
                    progressFill.style.width = '10%';
                    progressFill.textContent = '10%';

                    // Get compression settings
                    const compressionType = document.querySelector('input[name="compression-type"]:checked').value;
                    const outputFormat = document.getElementById('video-format').value;
                    const originalSizeKB = currentVideoFile.size / 1024;

                    // Get video duration from metadata
                    const videoDuration = await getVideoDuration(currentVideoFile);
                    const audioBitrate = '128k'; // Good quality audio

                    let targetBitrate;

                    if (compressionType === 'percentage') {
                        const percentage = document.getElementById('compression-percentage').value;
                        const targetSizeKB = (originalSizeKB * percentage) / 100;
                        targetBitrate = calculateBitrate(targetSizeKB, videoDuration);
                    } else {
                        const targetSizeKB = document.getElementById('target-size').value;
                        if (!targetSizeKB || targetSizeKB < 100) {
                            alert('Please enter a valid target size (minimum 100 KB)');
                            compressVideoBtn.disabled = false;
                            videoProgress.classList.add('hidden');
                            return;
                        }
                        targetBitrate = calculateBitrate(targetSizeKB, videoDuration);
                    }

                    progressText.textContent = 'Preparing compression settings...';
                    progressFill.style.width = '15%';
                    progressFill.textContent = '15%';

                    // Build FFmpeg command for quality-preserved compression
                    let outputFileName = `output.${outputFormat}`;

                    // Clean up any previous output files
                    try {
                        ffmpeg.FS('unlink', outputFileName);
                    } catch (e) {
                        // File doesn't exist, ignore
                    }

                    // Build FFmpeg command with proper quality settings
                    let ffmpegArgs;

                    if (outputFormat === 'mp4' || outputFormat === 'mkv') {
                        // For H.264: Use 2-pass encoding for accurate target size with good quality
                        ffmpegArgs = [
                            '-i', 'input.mp4',
                            '-c:v', 'libx264',
                            '-b:v', targetBitrate,
                            '-maxrate', targetBitrate,
                            '-bufsize', (parseInt(targetBitrate) * 2) + '',
                            '-c:a', 'aac',
                            '-b:a', audioBitrate,
                            '-preset', 'slow', // Better quality
                            '-profile:v', 'high', // High profile for better quality
                            '-level', '4.1',
                            '-movflags', '+faststart', // Fast start for web playback
                            '-pix_fmt', 'yuv420p',
                            outputFileName
                        ];
                    } else if (outputFormat === 'webm') {
                        // For VP8/WebM: Use constrained quality mode
                        ffmpegArgs = [
                            '-i', 'input.mp4',
                            '-c:v', 'libvpx',
                            '-b:v', targetBitrate,
                            '-maxrate', targetBitrate,
                            '-bufsize', (parseInt(targetBitrate) * 2) + '',
                            '-qmin', '10',
                            '-qmax', '42',
                            '-c:a', 'libvorbis',
                            '-b:a', audioBitrate,
                            '-quality', 'good',
                            '-cpu-used', '0', // Best quality (slower)
                            outputFileName
                        ];
                    } else {
                        // For AVI and others
                        ffmpegArgs = [
                            '-i', 'input.mp4',
                            '-c:v', getVideoCodec(outputFormat),
                            '-b:v', targetBitrate,
                            '-maxrate', targetBitrate,
                            '-bufsize', (parseInt(targetBitrate) * 2) + '',
                            '-c:a', getAudioCodec(outputFormat),
                            '-b:a', audioBitrate,
                            '-q:v', '3', // Quality setting (lower = better)
                            outputFileName
                        ];
                    }

                    progressText.textContent = 'Starting video compression...';

                    // Execute FFmpeg command (progress callback will update status)
                    await ffmpeg.run(...ffmpegArgs);

                    progressText.textContent = 'Finalizing and packaging compressed video...';
                    progressFill.style.width = '95%';
                    progressFill.textContent = '95%';

                    // Read the output file
                    const data = ffmpeg.FS('readFile', outputFileName);
                    compressedVideoBlob = new Blob([data.buffer], { type: `video/${outputFormat}` });

                    // Display results
                    displayVideoResult(currentVideoFile, compressedVideoBlob, outputFormat);

                    progressFill.style.width = '100%';
                    progressFill.textContent = '100%';
                    progressText.textContent = 'Compression complete!';

                    setTimeout(() => {
                        videoProgress.classList.add('hidden');
                    }, 1500);

                } catch (error) {
                    console.error('Video compression error:', error);

                    let errorMessage = error.message;

                    // Provide helpful error messages
                    if (error.message.includes('SharedArrayBuffer')) {
                        errorMessage = 'Video compression requires a secure context (HTTPS). Please deploy this tool to a web server with HTTPS to use video compression features.';
                    } else if (error.message.includes('codec') || error.message.includes('encoder')) {
                        errorMessage = 'The selected output format may not be fully supported. Try using MP4 format instead.';
                    }

                    alert('Error compressing video: ' + errorMessage);
                    videoProgress.classList.add('hidden');
                    compressVideoBtn.disabled = false;
                }
            });

            // Download compressed video button handler
            downloadVideoBtn.addEventListener('click', () => {
                if (!compressedVideoBlob) return;

                const outputFormat = document.getElementById('video-format').value;
                const originalName = currentVideoFile.name.substring(0, currentVideoFile.name.lastIndexOf('.')) || currentVideoFile.name;
                const fileName = `${originalName}_compressed.${outputFormat}`;

                const url = URL.createObjectURL(compressedVideoBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = fileName;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });

            // Helper functions
            function calculateBitrate(targetSizeKB, durationInSeconds) {
                // More accurate bitrate calculation
                const targetSizeBytes = targetSizeKB * 1024;
                const audioBitrateKbps = 128; // 128 kbps for audio

                // Calculate audio size: (bitrate in kbps * duration in seconds * 1024 bits) / 8 bits per byte
                const audioSizeBytes = (audioBitrateKbps * durationInSeconds * 1024) / 8;

                // Remaining size for video (with 5% overhead for container)
                const videoSizeBytes = (targetSizeBytes - audioSizeBytes) * 0.95;

                // Calculate video bitrate: (size in bytes * 8 bits per byte) / duration in seconds
                const videoBitrateBps = (videoSizeBytes * 8) / durationInSeconds;

                // Convert to kbps for better readability in logs
                const bitrateKbps = Math.floor(videoBitrateBps / 1024);

                // Ensure minimum quality bitrate (256kbps min, but prefer 500kbps+)
                const finalBitrateKbps = Math.max(bitrateKbps, 256);

                // Return as string with 'k' suffix for FFmpeg
                return finalBitrateKbps + 'k';
            }

            function getVideoDuration(file) {
                return new Promise((resolve) => {
                    const video = document.createElement('video');
                    video.preload = 'metadata';
                    video.onloadedmetadata = function() {
                        window.URL.revokeObjectURL(video.src);
                        resolve(video.duration);
                    }
                    video.src = URL.createObjectURL(file);
                });
            }

            function getVideoCodec(format) {
                const codecs = {
                    'mp4': 'libx264',
                    'webm': 'libvpx', // Using libvpx (VP8) for better compatibility
                    'avi': 'mpeg4',
                    'mkv': 'libx264'
                };
                return codecs[format] || 'libx264';
            }

            function getAudioCodec(format) {
                const codecs = {
                    'mp4': 'aac',
                    'webm': 'libvorbis', // Using Vorbis for better compatibility with VP8
                    'avi': 'libmp3lame',
                    'mkv': 'aac'
                };
                return codecs[format] || 'aac';
            }

            function displayVideoResult(originalFile, compressedBlob, format) {
                const originalSize = originalFile.size;
                const compressedSize = compressedBlob.size;
                const reduction = ((originalSize - compressedSize) / originalSize) * 100;

                document.getElementById('compressed-video-size').textContent = `Size: ${formatBytes(compressedSize)}`;
                document.getElementById('compression-ratio').textContent =
                    `Compression: ${reduction.toFixed(2)}% reduction (${formatBytes(originalSize)} ‚Üí ${formatBytes(compressedSize)})`;
                document.getElementById('quality-info').textContent = 'Quality: High (H.264 High Profile, Optimized Encoding)';

                // Show preview
                const previewVideo = document.getElementById('preview-video');
                previewVideo.src = URL.createObjectURL(compressedBlob);

                videoOutput.classList.remove('hidden');
                downloadVideoBtn.classList.remove('hidden');
                downloadVideoBtn.disabled = false;
                compressVideoBtn.disabled = false;
            }
        }
    </script>

    <!-- Particle Animation -->
    <script>
    function initParticles() {
        const canvas = document.getElementById('particles-canvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        let particles = [];
        let animationId;

        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 3 + 1;
                this.speedX = Math.random() * 1 - 0.5;
                this.speedY = Math.random() * 1 - 0.5;
                this.opacity = Math.random() * 0.5 + 0.2;

                const colors = [
                    'rgba(102, 126, 234,',
                    'rgba(118, 75, 162,',
                    'rgba(240, 147, 251,',
                    'rgba(67, 233, 123,'
                ];
                this.color = colors[Math.floor(Math.random() * colors.length)];
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;

                if (this.x > canvas.width) this.x = 0;
                if (this.x < 0) this.x = canvas.width;
                if (this.y > canvas.height) this.y = 0;
                if (this.y < 0) this.y = canvas.height;
            }

            draw() {
                ctx.fillStyle = this.color + this.opacity + ')';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function createParticles() {
            const particleCount = Math.min(Math.floor((canvas.width * canvas.height) / 15000), 100);
            particles = [];
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }
        }

        function connectParticles() {
            for (let i = 0; i < particles.length; i++) {
                for (let j = i + 1; j < particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < 150) {
                        const opacity = (1 - distance / 150) * 0.2;
                        ctx.strokeStyle = `rgba(102, 126, 234, ${opacity})`;
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });

            connectParticles();

            animationId = requestAnimationFrame(animate);
        }

        createParticles();
        animate();

        window.addEventListener('beforeunload', () => {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
        });
    }

    document.addEventListener('DOMContentLoaded', initParticles);
    </script>
</body>

</html>
